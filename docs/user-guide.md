# KeywordAssistant 插件用户使用手册 / 内部测试指南

---

## 一、插件安装与初始化

### 1.1 安装方式

* 进入 Chrome 浏览器扩展管理页面：`chrome://extensions/`
* 打开“开发者模式”
* 点击“加载已解压的扩展程序”，选择项目根目录
* 确认插件图标出现在工具栏

### 1.2 初次配置

* 点击插件图标，进入设置页
* 输入并保存：

  * 默认站点名称与主域
  * 所属行业与标签（可选）
  * 评论风格偏好（技术 / 中立 / 俏皮）
  * GPT / Claude API Key（用于评论生成）
* 授权插件访问目标网页（建议在 `manifest.json` 中显式声明常用外链站域名）

---

## 二、功能使用指南

### 2.1 外链采集

#### 方式一：Ahrefs 报告页面

* 打开 Ahrefs 的外链报告页（如“Referring Domains”）
* 点击插件图标
* 点击「采集外链」按钮，插件将自动抓取当前报告页内容并结构化存储

#### 方式二：任意页面

* 在浏览任意页面时点击插件图标
* 插件将扫描页面中所有 `<a href>` 标签，提取外链（排除同域、锚点、无效链接）

#### 方式三：CSV 导入

* 点击「导入 CSV」按钮，上传本地外链列表
* 插件会进行字段映射与自动清洗（去重、格式校验）

### 2.2 外链管理

* 插件主界面显示所有采集到的外链
* 支持按类型、状态、平台、标签等多维度筛选
* 可手动编辑每条外链的：

  * 类型（博客 / 论坛 / 聚合 / 付费）
  * 所属平台（WordPress、Disqus、其他）
  * 标签、可投稿性等
* 可批量导出 JSON 或 CSV 文件用于备份或外部处理

### 2.3 外链提交

* 在外链列表中点击「提交」按钮
* 插件将：

  * 打开目标链接页面（后台或新标签页）
  * 自动识别评论/投稿入口
  * 读取页面内容 + 站点信息，调用 LLM 生成评论
  * 自动填写表单并点击提交
* 提交结果将在界面更新为「成功 / 失败」，并记录失败原因

---

## 三、测试用例清单

### 3.1 采集功能测试

* [ ] 正常采集 Ahrefs 页面
* [ ] 正常采集普通页面外链
* [ ] 导入包含空行、无效链接、重复链接的 CSV，并验证清洗效果

### 3.2 外链数据验证

* [ ] 外链状态更新是否同步本地 JSON
* [ ] 外链属性是否完整写入（含 nofollow, type, tags 等）

### 3.3 提交流程测试

* [ ] WordPress 页面识别并提交成功
* [ ] 无评论区页面正确记录失败（含错误信息）
* [ ] 多平台切换下提交记录归属正确
* [ ] LLM 评论风格切换有效，生成内容合理

### 3.4 数据管理测试

* [ ] 导出 JSON 文件可读取并结构一致
* [ ] 导入后原始字段保留完整
* [ ] 清空功能可用，操作前弹出确认

---

## 四、权限与常见问题

### 4.1 插件权限说明

* 插件需访问第三方页面内容（使用 `<all_urls>`）
* 需手动启用对新域名的注入权限（或在 manifest 中列明）

### 4.2 常见问题

| 问题       | 原因                 | 解决方案         |
| -------- | ------------------ | ------------ |
| 插件无法注入页面 | 域名未授权 / CSP 限制     | 检查权限设置，或换页测试 |
| 提交失败     | 表单按钮未识别            | 手动标注平台类型后重试  |
| 评论生成卡住   | 模型响应慢 / API Key 失效 | 检查网络与模型设置    |
| 外链未保存    | popup 页面关闭过快       | 等待提示完成再关闭窗口  |

---

（使用手册与测试指南完）
